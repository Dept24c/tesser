<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>tesser.utils documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Tesser.all 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tesser</span></div></div></li><li class="depth-2 branch"><a href="tesser.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="tesser.hadoop.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hadoop</span></div></a></li><li class="depth-3"><a href="tesser.hadoop.serialization.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serialization</span></div></a></li><li class="depth-2 branch"><a href="tesser.math.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>math</span></div></a></li><li class="depth-2 branch"><a href="tesser.quantiles.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quantiles</span></div></a></li><li class="depth-2 branch"><a href="tesser.simple.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simple</span></div></a></li><li class="depth-2 current"><a href="tesser.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tesser.utils.html#var--.3EUnsafePair"><div class="inner"><span>-&gt;UnsafePair</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-append"><div class="inner"><span>append</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-complete-triangular-matrix"><div class="inner"><span>complete-triangular-matrix</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-cumulative-sums"><div class="inner"><span>cumulative-sums</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-differences"><div class="inner"><span>differences</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-first-non-nil-reducer"><div class="inner"><span>first-non-nil-reducer</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-index-by"><div class="inner"><span>index-by</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-map-vals"><div class="inner"><span>map-vals</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-maybe-unary"><div class="inner"><span>maybe-unary</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-Pair"><div class="inner"><span>Pair</span></div></a></li><li class="depth-2 branch"><a href="tesser.utils.html#var-a"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>a</span></div></a></li><li class="depth-2 branch"><a href="tesser.utils.html#var-b"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>b</span></div></a></li><li class="depth-2 branch"><a href="tesser.utils.html#var-set-a.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>set-a!</span></div></a></li><li class="depth-2 branch"><a href="tesser.utils.html#var-set-b.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>set-b!</span></div></a></li><li class="depth-2"><a href="tesser.utils.html#var-set-both.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>set-both!</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-partition-all-array"><div class="inner"><span>partition-all-array</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-partition-all-fast"><div class="inner"><span>partition-all-fast</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-partition-all-vec"><div class="inner"><span>partition-all-vec</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-path-fn"><div class="inner"><span>path-fn</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-poll.21"><div class="inner"><span>poll!</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-prepend"><div class="inner"><span>prepend</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-reduce-first"><div class="inner"><span>reduce-first</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-scred"><div class="inner"><span>scred</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-successive-pairs"><div class="inner"><span>successive-pairs</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-unsafe-pair"><div class="inner"><span>unsafe-pair</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="tesser.utils.html#var-var-.3Esym"><div class="inner"><span>var-&gt;sym</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">tesser.utils</h2><div class="doc"><div class="markdown"><p>Toolbox.</p></div></div><div class="public anchor" id="var--.3EUnsafePair"><h3>-&gt;UnsafePair</h3><div class="usage"><code>(-&gt;UnsafePair a b)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class tesser.utils.UnsafePair.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L32">view source</a></div></div><div class="public anchor" id="var-append"><h3>append</h3><div class="usage"><code>(append coll element)</code></div><div class="doc"><div class="markdown"><p>Appends a single value to the end of a sequence. O(1); uses conj for vectors, concat for other seqs.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L16">view source</a></div></div><div class="public anchor" id="var-complete-triangular-matrix"><h3>complete-triangular-matrix</h3><div class="usage"><code>(complete-triangular-matrix m)</code></div><div class="doc"><div class="markdown"><p>Given a map of <code>[x y]</code> keys to values, returns a map where <em>both</em> <code>[x y]</code> and <code>[y x]</code> point to identical values. Useful for pairwise comparisons which compute triangular matrices but want to return a full matrix.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L131">view source</a></div></div><div class="public anchor" id="var-cumulative-sums"><h3>cumulative-sums</h3><div class="usage"><code>(cumulative-sums coll)</code><code>(cumulative-sums init coll)</code></div><div class="doc"><div class="markdown"><p>A seq of the cumulative sums of all elements in <code>coll</code>, starting at <code>init</code> or the first element of <code>coll</code> if <code>init</code> is not provided. If <code>differences</code> provides differentials, <code>cumulative-sums</code> provides integrals.</p>
<pre><code>(cumulative-sums 1 [1 2 1 -3])
; (1 2 4 5 2)
</code></pre></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L70">view source</a></div></div><div class="public anchor" id="var-differences"><h3>differences</h3><div class="usage"><code>(differences coll)</code></div><div class="doc"><div class="markdown"><p>A seq of the differences between successive elements in a collection. For example,</p>
<pre><code>(differences [1 2 4 5 2])
; (1 2 1 -3)
</code></pre></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L59">view source</a></div></div><div class="public anchor" id="var-first-non-nil-reducer"><h3>first-non-nil-reducer</h3><div class="usage"><code>(first-non-nil-reducer _ x)</code></div><div class="doc"><div class="markdown"><p>A reducing function that simply returns the first non-nil element in the collection.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L138">view source</a></div></div><div class="public anchor" id="var-index-by"><h3>index-by</h3><div class="usage"><code>(index-by f xs)</code></div><div class="doc"><div class="markdown"><p>Given an indexing function f and a collection of xs, return a map of (f x) -&gt; x.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L111">view source</a></div></div><div class="public anchor" id="var-map-vals"><h3>map-vals</h3><div class="usage"><code>(map-vals f m)</code></div><div class="doc"><div class="markdown"><p>Maps over a key-value map, returning a new map by transforming each value with (f v).</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L101">view source</a></div></div><div class="public anchor" id="var-maybe-unary"><h3>maybe-unary</h3><div class="usage"><code>(maybe-unary f)</code></div><div class="doc"><div class="markdown"><p>Not all functions used in <code>tesser/fold</code> and <code>tesser/reduce</code> have a single-arity form. This takes a function <code>f</code> and returns a fn <code>g</code> such that <code>(g x)</code> is <code>(f x)</code> unless <code>(f x)</code> throws ArityException, in which case <code>(g
x)</code> returns just <code>x</code>.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L231">view source</a></div></div><div class="public anchor" id="var-Pair"><h3>Pair</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-a"><h3>a</h3><div class="usage"><code>(a pair)</code></div><div class="doc"><div class="markdown"><p>Returns the first element in the Pair.</p></div></div></div><div class="public anchor" id="var-b"><h3>b</h3><div class="usage"><code>(b pair)</code></div><div class="doc"><div class="markdown"><p>Returns the second element in the Pair.</p></div></div></div><div class="public anchor" id="var-set-a.21"><h3>set-a!</h3><div class="usage"><code>(set-a! pair a&apos;)</code></div><div class="doc"><div class="markdown"><p>Set the first element in the Pair.</p></div></div></div><div class="public anchor" id="var-set-b.21"><h3>set-b!</h3><div class="usage"><code>(set-b! pair b&apos;)</code></div><div class="doc"><div class="markdown"><p>Set the second element in the Pair.</p></div></div></div><div class="public anchor" id="var-set-both.21"><h3>set-both!</h3><div class="usage"><code>(set-both! pair a&apos; b&apos;)</code></div><div class="doc"><div class="markdown"><p>Set both the first and second element in the pair.</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L25">view source</a></div></div><div class="public anchor" id="var-partition-all-array"><h3>partition-all-array</h3><div class="usage"><code>(partition-all-array n ary)</code></div><div class="doc"><div class="markdown"><p>Partitions an array into reducibles of size n (like partition-all), but faster.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L201">view source</a></div></div><div class="public anchor" id="var-partition-all-fast"><h3>partition-all-fast</h3><div class="usage"><code>(partition-all-fast n coll)</code></div><div class="doc"><div class="markdown"><p>Like partition-all, but only emits reducibles. Faster for vectors and arrays. May return chunks of any reducible type.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L222">view source</a></div></div><div class="public anchor" id="var-partition-all-vec"><h3>partition-all-vec</h3><div class="usage"><code>(partition-all-vec n v)</code></div><div class="doc"><div class="markdown"><p>Partitions a vector into reducibles of size n (somewhat like partition-all) but uses subvec for speed.</p>
<pre><code>(partition-all-vec 2 [1])     ; =&gt; ([1])
(partition-all-vec 2 [1 2 3]) ; =&gt; ([1 2] [3])
</code></pre><p>Useful for supplying vectors to tesser.core/tesser.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L188">view source</a></div></div><div class="public anchor" id="var-path-fn"><h3>path-fn</h3><div class="usage"><code>(path-fn path)</code></div><div class="doc"><div class="markdown"><p>Takes a path for get-in and converts it to a function that operates on associative structures.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L120">view source</a></div></div><div class="public anchor" id="var-poll.21"><h3>poll!</h3><div class="usage"><code>(poll! a)</code></div><div class="doc"><div class="markdown"><p>Given an atom pointing to a sequence, pulls the first element off the sequence atomically and returns it.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L92">view source</a></div></div><div class="public anchor" id="var-prepend"><h3>prepend</h3><div class="usage"><code>(prepend coll element)</code></div><div class="doc"><div class="markdown"><p>Prepends a single value to the beginning of a sequence. O(1) for sequences using cons, O(n) for vectors. Returns a singleton vector when coll is nil.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L8">view source</a></div></div><div class="public anchor" id="var-reduce-first"><h3>reduce-first</h3><div class="usage"><code>(reduce-first reducible)</code></div><div class="doc"><div class="markdown"><p>clojure.core/first, but for for reducibles.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L144">view source</a></div></div><div class="public anchor" id="var-scred"><h3>scred</h3><h4 class="type">macro</h4><div class="usage"><code>(scred rfn-name expr)</code></div><div class="doc"><div class="markdown"><p>Helper for short-circuiting nested reduction functions which can emit reduced values. Given the name of a function that could emit a reduced value, and an expression:</p>
<pre><code>(scred rfn [1 (rfn x y)])
</code></pre><p>Expands to code that converts the expression to a reduced value whenever the underlying function emits a reduced value:</p>
<pre><code>(let [acc (rfn x y)]
  (if (reduced? acc)
    (let [acc @acc] (reduced [1 acc]))
    [1 acc]))
</code></pre><p>scred does not interpret lexical scope, so don&rsquo;t rebind rfn in expr. Uses prewalk, so the outermost fn is where scred will cut out an expr. Keep this as simple as possible, haha.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L149">view source</a></div></div><div class="public anchor" id="var-successive-pairs"><h3>successive-pairs</h3><div class="usage"><code>(successive-pairs coll)</code><code>(successive-pairs prev coll)</code></div><div class="doc"><div class="markdown"><p>A much faster version of (partition 2 1 coll) which generates vectors, not lazy seqs.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L49">view source</a></div></div><div class="public anchor" id="var-unsafe-pair"><h3>unsafe-pair</h3><div class="usage"><code>(unsafe-pair)</code><code>(unsafe-pair a b)</code></div><div class="doc"><div class="markdown"><p>Constructs a new unsynchronized mutable pair object, suitable for single-threaded mutation.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L43">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update m k f)</code><code>(update m k f a)</code><code>(update m k f a b)</code><code>(update m k f a b c)</code><code>(update m k f a b c &amp; args)</code></div><div class="doc"><div class="markdown"><p>Given a map, a key, a function f, and optional args, returns a copy of map with that key set to (f current-val arg1 arg2 &hellip;). Like update-in, but only one level deep.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L82">view source</a></div></div><div class="public anchor" id="var-var-.3Esym"><h3>var-&gt;sym</h3><div class="usage"><code>(var-&gt;sym v)</code></div><div class="doc"><div class="markdown"><p>Converts a var to fully qualified symbol.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/tesser/blob/master/master/../core/src/tesser/utils.clj#L126">view source</a></div></div></div></body></html>